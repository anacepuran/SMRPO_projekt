(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{1:function(t,e){},"27e4":function(t,e,a){},"3ea8":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-ma-lg window-width"},[a("q-btn",{staticClass:"q-ma-xs",attrs:{"text-color":"primary",flat:"",icon:"arrow_back_ios",label:"All projects"},on:{click:function(e){return t.$router.push("/home")}}}),a("q-card",{staticClass:"q-ma-lg",attrs:{flat:"",bordered:""}},[a("q-card-section",{attrs:{horizontal:""}},[a("q-card-section",{staticClass:"q-ma-md bg-primary"},[a("div",{staticClass:"text-overline text-white",staticStyle:{transform:"rotate(-90deg)","margin-top":"50%"}},[t._v("Project")])]),a("q-card-section",{staticStyle:{width:"80%"}},[a("div",{staticClass:"text-h5 q-ma-md"},[t._v(t._s(t.project.name))]),a("div",{staticClass:"text-caption text-dark-grey q-ma-md"},[t._v(t._s(t.project.description))])]),a("q-separator",{attrs:{vertical:""}}),a("q-card-section",{staticStyle:{width:"70%"}},t._l(t.project.users,(function(e){return a("div",{key:e.user_name,staticClass:"row q-ma-md"},[a("q-avatar",{staticClass:"q-ma-xs",attrs:{size:"20px","font-size":"15px",color:t.avatarColor(e.user_role),"text-color":"white",icon:"person"}}),a("span",{staticClass:"q-ma-xs"},[t._v(t._s(e.user_name))]),a("span",{staticClass:"text-caption text-dark-grey q-ma-xs"},[t._v(" "+t._s(t.formatUserRoles(e.user_role)))])],1)})),0),a("q-card-section",{staticClass:"full-width"},[a("div",{staticClass:"row"},[a("q-space"),t.checkRole("Scrum Master")?a("q-btn",{staticClass:"q-ma-md",attrs:{size:"md",icon:"edit",color:"secondary",label:"Edit project"},on:{click:t.editFunction}}):t._e()],1)])],1)],1),a("q-dialog",{model:{value:t.editProjectData,callback:function(e){t.editProjectData=e},expression:"editProjectData"}},[a("q-card",{staticClass:"q-pa-md",staticStyle:{width:"80vh"}},[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6"},[t._v(t._s(t.dialogTitle))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("ProjectForm",{attrs:{newProject:t.editProject,editProject:t.editProjectData},on:{submitProject:function(e){return t.updateProjectInfo()}}})],1)],1),a("div",[a("q-splitter",{scopedSlots:t._u([{key:"before",fn:function(){return[a("q-tabs",{staticClass:"text-secondary",attrs:{vertical:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"productbacklog",icon:"credit_card",label:"Product Backlog"}}),!1===t.checkRole("Product Owner")||"Admin"===t.user.permissions?a("q-tab",{attrs:{name:"sprints",icon:"dynamic_feed",label:"Sprints"}}):t._e(),a("q-tab",{attrs:{name:"documentation",icon:"description",label:"Documentation"}}),a("q-tab",{attrs:{name:"wall",icon:"post_add",label:"Project Wall"}})],1)]},proxy:!0},{key:"after",fn:function(){return[a("q-tab-panels",{attrs:{animated:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"productbacklog"}},[a("ProductBacklog",{attrs:{projectId:t.$route.params.id,user:t.user}})],1),a("q-tab-panel",{attrs:{name:"sprints"}},[a("SprintTable",{attrs:{projectIdProp:t.$route.params.id,projectUsersProp:t.project.users}})],1),a("q-tab-panel",{attrs:{name:"documentation"}},[a("Documentation",{attrs:{project:t.project}})],1),a("q-tab-panel",{attrs:{name:"wall"}},[a("ProjectWall",{attrs:{project:t.project}})],1)],1)]},proxy:!0}]),model:{value:t.splitterModel,callback:function(e){t.splitterModel=e},expression:"splitterModel"}})],1)],1)},s=[],i=a("7053"),o=a.n(i),n=(a("e01a"),a("2f62")),c=a("1da1"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("q-card",{staticClass:"row q-ma-md bg-secondary"},[a("q-btn",{staticClass:"q-ma-lg",attrs:{color:"white","text-color":"black",dense:"",size:"sm",label:"import",icon:"cloud_upload"},on:{click:t.importFile}}),a("q-btn",{staticClass:"q-ma-lg",attrs:{color:"white","text-color":"black",dense:"",size:"sm",label:"export",icon:"file_download"},on:{click:t.exportFile}}),a("q-space"),!1===t.editDocumentation?a("q-btn",{staticClass:"q-ma-md",attrs:{label:"Edit documentation",color:"primary",icon:"edit"},on:{click:function(e){t.editDocumentation=!0}}}):t._e()],1),a("div",[!0===t.chooseFile?a("div",{staticClass:"q-ma-md"},[a("span",{staticStyle:{color:"red"}},[t._v("Warning!")]),a("p",{staticClass:"text-caption"},[t._v(" If you upload a file, the current documentation will be overwritten.")])]):t._e(),a("input",{class:t.getClass,attrs:{type:"file",id:"input-file"}}),!0===t.uploadButton?a("q-btn",{staticClass:"q-ma-md",attrs:{color:"secondary",label:"upload"},on:{click:t.uploadDocumentation}}):t._e(),!1===t.uploadButton&&!0===t.chooseFile?a("q-btn",{staticClass:"q-ma-md",attrs:{round:"",flat:"",color:"secondary",icon:"close"},on:{click:t.closeImport}}):t._e()],1),a("div",{staticClass:"q-pa-md"},[!0===t.editDocumentation?a("form",{attrs:{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"}},[a("q-editor",{attrs:{"min-height":"5rem",toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","strike","underline"],["hr","link"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","code","h6","h5","h4","h3","h2","h1"]},{label:t.$q.lang.editor.defaultFont,icon:t.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]}],["unordered","ordered"],["undo","redo"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})],1):a("q-card",{attrs:{flat:"",bordered:""}},[a("q-card-section",{domProps:{innerHTML:t._s(t.editor)}})],1),!0===t.editDocumentation?a("div",{staticClass:"row q-ma-md"},[a("q-space"),a("q-btn",{attrs:{label:"Save",color:"teal"},on:{click:function(e){return t.updateDocumentation()}}})],1):t._e()],1)],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"text-h4 q-ma-md"},[t._v("Documentation")])])}];a("e6cf");const p=a("8baf").default;console.log(new p);var u={name:"Documentation",data(){return{editor:"",editDocumentation:!1,updateProj:{name:"",users:[],description:"",documentation:"",wall:[],_id:""},chooseFile:!1,uploadedText:"",uploadButton:!1}},props:{project:{type:Object}},computed:{getClass(){return!0===this.chooseFile?"q-ma-md":"hidden q-ma-md"}},mounted(){this.updateProj=this.$props.project,this.editor=this.$props.project.documentation},methods:o()(o()({},Object(n["b"])("project",["updateProject"])),{},{updateDocumentation(){this.updateProj.documentation=this.editor,this.updateProject(this.updateProj),this.editDocumentation=!1},exportFile(){var t=new p,e=t.turndown(this.editor),a="README.md";this.download(a,e)},download(t,e){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},importFile(){this.chooseFile=!0,document.getElementById("input-file").addEventListener("change",this.getFile)},getFile(t){console.log("get file"),this.uploadButton=!0;const e=t.target;"files"in e&&e.files.length>0&&this.placeFileContent(e.files[0])},placeFileContent(t){console.log("place file content"),this.readFileContent(t).then((t=>{this.uploadedText=t,console.log(this.uploadedText)})).catch((t=>console.log(t)))},readFileContent(t){console.log("read file content");const e=new FileReader;return new Promise(((a,r)=>{e.onload=t=>a(t.target.result),e.onerror=t=>r(t),e.readAsText(t)}))},uploadDocumentation(){const t=a("339e"),e=new t.Converter,r=this.uploadedText,s=e.makeHtml(r);console.log(s),this.editor=s,this.updateDocumentation(),this.chooseFile=!1,this.uploadButton=!1,this.uploadedText=""},closeImport(){this.chooseFile=!1,this.uploadButton=!1,this.uploadedText=""}})},m=u,h=a("2877"),C=a("f09f"),_=a("9c40"),v=a("2c91"),f=a("d66b"),b=a("a370"),g=a("eebe"),q=a.n(g),w=Object(h["a"])(m,d,l,!1,null,null,null),j=w.exports;q()(w,"components",{QCard:C["a"],QBtn:_["a"],QSpace:v["a"],QEditor:f["a"],QCardSection:b["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"q-ma-md"},[a("q-card-section",{staticClass:"row bg-primary"},[a("div",{staticClass:"text-white text-h6 q-ma-sm"},[t._v("Sprints")]),a("q-space"),a("div",{staticClass:"q-ma-sm"},[t.checkRole("Scrum Master")?a("q-btn",{attrs:{size:"md",color:"secondary",label:"Add Sprint",icon:"create_new_folder"},on:{click:function(e){t.addSprint=!0}}}):t._e()],1)],1)],1),a("div",{staticClass:"row q-ma-md"},[a("q-table",{staticClass:"full-width",attrs:{data:t.filteredSprints,columns:t.columns,"row-key":"name","virtual-scroll":"",pagination:t.pagination,"rows-per-page-options":[0],loading:t.loading},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"body-cell-name",fn:function(e){return[a("q-td",{class:t.isActive(e.row.start_date,e.row.end_date)?"bg-green-3":"",attrs:{props:e},on:{click:function(a){return t.openSprint(e.row._id)}}},[a("q-td",{key:"name"},[a("q-icon",{staticClass:"q-ma-sm ",attrs:{size:"sm",color:"secondary",name:"folder_open"}}),a("span",{staticClass:"q-ma-sm ",staticStyle:{"font-size":"2vh"}},[t._v(t._s(e.row.name))])],1)],1)]}},{key:"body-cell-start_date",fn:function(e){return[a("q-td",{class:t.isActive(e.row.start_date,e.row.end_date)?"bg-green-3":"",attrs:{props:e}},[a("q-td",{key:"start_date"},[a("span",{staticClass:"q-ma-sm"},[t._v(t._s(e.row.start_date))])])],1)]}},{key:"body-cell-end_date",fn:function(e){return[a("q-td",{class:t.isActive(e.row.start_date,e.row.end_date)?"bg-green-3":"",attrs:{props:e}},[a("q-td",{key:"end_date"},[a("span",{staticClass:"q-ma-sm"},[t._v(t._s(e.row.end_date))])])],1)]}},{key:"body-cell-expected_time",fn:function(e){return[a("q-td",{class:t.isActive(e.row.start_date,e.row.end_date)?"bg-green-3":"",attrs:{props:e}},[a("q-td",{key:"expected_time"},[a("span",{staticClass:"q-ma-sm"},[t._v(t._s(e.row.expected_time))])])],1)]}},{key:"body-cell-delete",fn:function(e){return[a("q-td",{class:t.isActive(e.row.start_date,e.row.end_date)?"bg-green-3":"",attrs:{props:e}},[a("q-td",{key:"delete",attrs:{align:"right"}},[!1===t.isActive(e.row.start_date,e.row.end_date)?a("q-btn",{staticClass:"q-ma-sm",attrs:{size:"sm",round:"",color:"negative",icon:"delete"},on:{click:function(a){t.confirmDelete=!0,t.deleteSprintId=e.row._id}}}):t._e()],1)],1)]}},{key:"body-cell-edit",fn:function(e){return[a("q-td",{class:t.isActive(e.row.start_date,e.row.end_date)?"bg-green-3":"",attrs:{props:e}},[a("q-td",{key:"edit"},[a("q-btn",{staticClass:"q-ma-sm",attrs:{flat:"",icon:"edit",color:"secondary"},on:{click:function(a){return t.editSprint(e.row)}}})],1)],1)]}}])})],1),a("q-dialog",{model:{value:t.confirmDelete,callback:function(e){t.confirmDelete=e},expression:"confirmDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-right"},[a("q-avatar",{attrs:{icon:"delete",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want to delete this Sprint?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:function(e){t.deleteSprintId=""}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"DELETE",color:"negative"},on:{click:function(e){return t.deleteFunction(t.deleteSprintId)}}})],1)],1)],1),a("q-dialog",{model:{value:t.editSprintData,callback:function(e){t.editSprintData=e},expression:"editSprintData"}},[a("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"80vh"}},[a("q-card-section",{staticClass:"row bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v(" Edit Sprint ")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:t.onReset}})],1),a("SprintForm",{attrs:{newSprint:t.editSprints,editProject:t.editSprintData},on:{submitSprint:t.showSprints}})],1)],1),a("q-dialog",{model:{value:t.addSprint,callback:function(e){t.addSprint=e},expression:"addSprint"}},[a("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"80vh"}},[a("q-card-section",{staticClass:"row bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v("Create new Sprint")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:t.onReset}})],1),a("SprintForm",{attrs:{newSprint:t.newSprint,editProject:!1},on:{submitSprint:t.showSprints}})],1)],1)],1)},x=[],y=(a("4e82"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-form",{staticClass:"q-ma-md",on:{submit:t.onSubmit,reset:t.onReset}},[a("div",{staticClass:"text-h6 q-ma-md"},[t._v(t._s(t.pushSprint.name))]),a("div",{staticClass:"row"},[!1===t.isActive(t.selectDuration.from,t.selectDuration.to)?a("div",{staticClass:"col q-ma-sm"},[a("q-btn",{staticClass:"q-ma-sm",attrs:{label:"Select duration",icon:"event",color:"secondary"},on:{click:function(e){t.datePicker=!0}}}),a("br"),""!==t.selectDuration?a("q-badge",{staticClass:"q-ma-sm",attrs:{color:"secondary"}},[t._v("\n        From: "+t._s(t.selectDuration.from)+"\n      ")]):t._e(),a("br"),""!==t.selectDuration?a("q-badge",{staticClass:"q-ma-sm",attrs:{color:"secondary"}},[t._v("\n        To: "+t._s(t.selectDuration.to)+"\n      ")]):t._e()],1):t._e(),a("div",{staticClass:"col q-ma-sm"},[a("q-input",{attrs:{filled:"",type:"number",label:"Sprint velocity",min:"1",max:"50",hint:"Please specify in points (MD)","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please select expected time"},function(t){return t>0&&t<51||"Please type a valid expected time"}]},model:{value:t.pushSprint.expectedtime,callback:function(e){t.$set(t.pushSprint,"expectedtime",e)},expression:"pushSprint.expectedtime"}})],1)]),a("q-dialog",{model:{value:t.datePicker,callback:function(e){t.datePicker=e},expression:"datePicker"}},[a("q-card",{staticClass:"q-ma-md"},[a("div",{staticClass:"row"},[a("q-date",{staticClass:"q-ma-md",attrs:{mask:"DD/MM/YYYY",minimal:"",range:""},model:{value:t.selectDuration,callback:function(e){t.selectDuration=e},expression:"selectDuration"}})],1),a("div",{staticClass:"row q-ma-md flex flex-center"},[a("q-btn",{attrs:{label:"Save",color:"primary"},on:{click:function(e){return t.setdates()}}}),a("q-btn",{attrs:{label:"Reset",flat:"",color:"primary"},on:{click:function(e){t.selectDuration="",t.dateError=""}}})],1),a("q-card-section",{staticClass:"text-center"},[""!=t.dateError?a("p",{staticStyle:{color:"red","font-size":"1.5vh","word-break":"break-all"}},[t._v(t._s(t.dateError))]):t._e()])],1)],1),a("q-card-actions",{attrs:{horizontal:"",align:"right"}},[a("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1),a("div",{staticClass:"q-ma-md text-center"},[""!=t.error?a("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e()])],1)}),D=[],k=(a("4d90"),a("c1df")),P=a.n(k),Y={name:"SprintForm",data(){return{error:"",dateError:"",allSprints:[],datePicker:!1,selectDuration:{},projectId:"",pushSprint:{name:"",_id:"",startdate:"",enddate:"",expectedtime:"",project_id:""},today:"",getdat:"",sdate:"",edate:""}},props:{editProject:{type:Boolean},newSprint:{type:Object}},computed:{allUsers(){var t=[],e=this.getUsers();for(var a in e){var r={label:e[a].username,value:e[a].username,role:""};t.push(r)}return console.log(t),t}},mounted(){console.log(this.pushSprint),this.fetchSprint(),this.fetchUsers(),this.onReset();var t=this.getSprints();this.allSprints=this.sprintsToArray(t),this.today=this.getDate(),this.selectDuration.from=this.pushSprint.startdate,this.selectDuration.to=this.pushSprint.enddate,this.sdate=this.$props.newSprint.startdate,this.edate=this.$props.newSprint.enddate},methods:o()(o()(o()(o()(o()({},Object(n["c"])("sprint",["getSprints"])),Object(n["c"])("user",["getUsers"])),Object(n["b"])("sprint",["fetchSprint","postSprint","updateSprint"])),Object(n["b"])("user",["fetchUsers"])),{},{sprintsToArray(t){var e=[];for(var a in t)t[a]._id!==this.$route.params.id&&t[a].project_id===this.pushSprint.project_id&&e.push(t[a]);return e},setdates(){this.dateError="";var t=P()(this.selectDuration.from,"DD/MM/YYYY").diff(P()(),"days");for(var e in t<0&&(this.dateError="Please select a start date in the future."),this.allSprints)this.dateOverlaps(this.selectDuration.from,this.selectDuration.to,this.allSprints[e].start_date,this.allSprints[e].end_date)&&this.allSprints[e].start_date!==this.sdate&&(this.dateError="Sprint duration overleaps with the "+this.allSprints[e].name+" duration.");""===this.dateError&&(this.pushSprint.startdate=this.selectDuration.from,this.pushSprint.enddate=this.selectDuration.to,this.dateError="",this.datePicker=!1)},isActive(t,e){var a=P()(t,"DD/MM/YYYY"),r=P()(e,"DD/MM/YYYY"),s=new Date,i=P()(s,"DD/MM/YYYY");return i>a&&i<r},dateOverlaps(t,e,a,r){var s=P()(t,"DD/MM/YYYY"),i=P()(e,"DD/MM/YYYY"),o=P()(a,"DD/MM/YYYY"),n=P()(r,"DD/MM/YYYY");return s<=o&&o<=i||(s<=n&&n<=i||o<s&&i<n)},getDate(){var t=new Date,e=`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}/${t.getFullYear()}`;return e},onSubmit(){var t="";this.$props.editProject?(t="Sprint updated.",console.log(this.pushSprint),this.updateSprint(this.pushSprint),this.onReset()):(t="Sprint added.",this.postSprint(this.pushSprint),this.onReset()),this.$q.notify({color:"green",textColor:"white",icon:"cloud_done",message:t,position:"top-right",timeout:1e3}),this.error="",this.$emit("submitSprint")},onReset(){this.pushSprint.name=this.$props.newSprint.name,this.pushSprint.project_id=this.$props.newSprint.project_id,this.pushSprint.startdate=this.$props.newSprint.startdate,this.pushSprint.enddate=this.$props.newSprint.enddate,this.pushSprint.expectedtime=this.$props.newSprint.expectedtime,this.pushSprint._id=this.$props.newSprint._id,this.error="",this.dateError=""}})},A=Y,E=a("0378"),O=a("58a81"),T=a("27f9"),M=a("24e8"),$=a("52ee"),Q=a("4b7e"),I=Object(h["a"])(A,y,D,!1,null,null,null),R=I.exports;q()(I,"components",{QForm:E["a"],QBtn:_["a"],QBadge:O["a"],QInput:T["a"],QDialog:M["a"],QCard:C["a"],QDate:$["a"],QCardSection:b["a"],QCardActions:Q["a"]});var U={name:"SprintTable",components:{SprintForm:R},data(){return{user:{},projectId:"",projectUsers:[],sprints:[],addSprint:!1,pagination:{rowsPerPage:0},loading:!1,deleteSprintId:"",confirmDelete:!1,newSprint:{name:"",project_id:"",startdate:"",enddate:"",expectedtime:""},editSprints:{_id:"",name:"",project_id:"",startdate:"",enddate:"",expectedtime:""},editSprintData:!1,sdate:"",edate:""}},props:{projectUsersProp:{type:Array},projectIdProp:{type:String},newSprint1:{type:Object}},mounted(){this.user=this.getCurrentUser(),this.projectId=this.$props.projectIdProp,this.projectUsers=this.$props.projectUsersProp,this.onReset(),this.showSprints()},computed:{filteredSprints(){return this.sortByDate(this.sprints),this.sprints},columns(){return this.checkRole("Scrum Master")?[{name:"name",required:!0,label:"Name",align:"left",field:t=>t.name,sortable:!0},{name:"start_date",align:"float-left",label:"Start date",field:"start_date"},{name:"end_date",align:"center",label:"End date",field:"end_date"},{name:"expected_time",align:"left",label:"Sprint velocity",field:"expected_time"},{name:"delete",align:"left",label:"Delete sprint",field:"delete"},{name:"edit",align:"center",label:"Edit sprint",field:"edit"}]:[{name:"name",required:!0,label:"Name",align:"left",field:t=>t.name,sortable:!0},{name:"start_date",align:"center",label:"Start date",field:"start_date"},{name:"end_date",align:"center",label:"End date",field:"end_date",sortable:!0},{name:"expected_time",align:"center",label:"Sprint velocity",field:"expected_time"}]}},methods:o()(o()(o()(o()(o()({},Object(n["c"])("user",["getCurrentUser"])),Object(n["c"])("sprint",["getSprints"])),Object(n["b"])("sprint",["fetchSprint","deleteSprint","updateSprint"])),Object(n["c"])("project",["getProjects"])),{},{sortByDate(t){t.sort((function(t,e){return P()(t.start_date,"DD/MM/YYYY")-P()(e.start_date,"DD/MM/YYYY")}));for(var e=0;e<t.length;e++)t[e].name="Sprint "+(e+1)},showSprints(){this.addSprint=!1,this.editSprintData=!1,this.loading=!0,setTimeout((()=>{var t=this.getSprints();this.sprints=this.sprintsToArray(t),this.loading=!1}),1e3)},sprintsToArray(t){var e=[];for(var a in t)t[a].project_id===this.projectId&&e.push(t[a]);return e},isActive(t,e){var a=P()(t,"DD/MM/YYYY"),r=P()(e,"DD/MM/YYYY"),s=new Date,i=P()(s,"DD/MM/YYYY");return i>a&&i<r},checkRole(t){var e=!1;if(this.user!=={})for(var a in"Admin"===this.user.permissions&&(e=!0),this.projectUsers)this.user.username===this.projectUsers[a].user_name&&this.projectUsers[a].user_role[1]===t&&(e=!0);return e},editSprint(t){this.editSprints.name=t.name,this.editSprints.startdate=t.start_date,this.editSprints.enddate=t.end_date,this.editSprints.expectedtime=t.expected_time,this.editSprints.project_id=t.project_id,this.editSprints._id=t._id,this.editSprintData=!0},openSprint(t){this.$router.push("/sprints/"+t)},deleteFunction(t){this.deleteSprint(t),this.showSprints()},onReset(){this.newSprint.name="Sprint",this.newSprint.startdate="",this.newSprint.enddate="",this.newSprint.expectedtime="",this.newSprint.project_id=this.projectId}})},F=U,N=a("eaac"),B=a("74f7"),z=a("db86"),L=a("0016"),W=a("cb32"),H=a("7f67"),G=Object(h["a"])(F,S,x,!1,null,null,null),J=G.exports;q()(G,"components",{QCard:C["a"],QCardSection:b["a"],QSpace:v["a"],QBtn:_["a"],QTable:N["a"],QInnerLoading:B["a"],QTd:z["a"],QIcon:L["a"],QDialog:M["a"],QAvatar:W["a"],QCardActions:Q["a"]}),q()(G,"directives",{ClosePopup:H["a"]});var K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),[a("div",{staticClass:"q-ma-md"},[0===t.updateProj.wall.length?a("div",{staticClass:"text-caption"},[t._v("There are no posts yet in this project.")]):a("q-scroll-area",{ref:"scrollArea",staticStyle:{height:"400px"}},t._l(t.updateProj.wall,(function(e){return a("q-card",{key:e.id,staticClass:"q-ma-sm",class:t.getClass(e),attrs:{flat:""}},[a("q-card-section",{attrs:{dense:""}},[a("div",{staticClass:"row"},[a("div",{staticClass:"text-bold q-ma-sm"},[t._v(t._s(e.user))]),a("div",{staticClass:"text-caption q-ma-sm"},[t._v(t._s(e.time))]),a("q-space"),t.getCurrentUser().username===e.user?a("q-btn",{attrs:{round:"",flat:"",icon:"delete",color:"secondary",size:"sm"},on:{click:function(a){return t.deletePost(e.id)}}}):t._e()],1)]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",{staticClass:"q-ma-sm",domProps:{innerHTML:t._s(e.post)}})],1)})),1)],1)],a("div",{staticClass:"q-pa-md"},[!0===t.addPost?a("form",{attrs:{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"}},[a("q-editor",{attrs:{"min-height":"5rem",toolbar:[["bold","italic","strike","underline"],["hr","link"],["unordered","ordered"],["undo","redo"]]},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})],1):t._e(),a("div",{staticClass:"row"},[a("q-space"),!1===t.addPost?a("q-btn",{staticClass:"q-ma-md",attrs:{label:"Add post",color:"secondary",icon:"edit"},on:{click:function(e){t.addPost=!0}}}):t._e()],1),!0===t.addPost?a("div",{staticClass:"row q-ma-md"},[a("q-space"),a("q-btn",{attrs:{label:"Post",color:"teal"},on:{click:function(e){return t.updateWall()}}})],1):t._e()])],2)},V=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"text-h4 q-ma-md"},[t._v("Project Wall")])])}],X={name:"ProjectWall",data(){return{editor:"",addPost:!1,updateProj:{name:"",users:[],description:"",documentation:"",wall:[],_id:""}}},props:{project:{type:Object}},mounted(){this.updateProj=this.$props.project,console.log(this.updateProj.wall)},methods:o()(o()(o()({},Object(n["b"])("project",["updateProject"])),Object(n["c"])("user",["getCurrentUser"])),{},{deletePost(t){console.log("postId"),console.log(t);for(var e=[],a=0;a<this.updateProj.wall.length;a++)console.log(this.updateProj.wall[a]),t===this.updateProj.wall[a].id?console.log("delete this one"):(this.updateProj.wall[a].id=e.length,e.push(this.updateProj.wall[a]));console.log(e),this.updateProj.wall=e,this.updateProject(this.updateProj)},updateWall(){var t=this.formatDate(),e={id:this.updateProj.wall.length,user:this.getCurrentUser().username,post:this.editor,time:t};this.updateProj.wall.unshift(e),console.log(this.updateProj.wall),this.updateProject(this.updateProj),this.addPost=!1,this.editor=""},formatDate(){const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var e=new Date,a=e.getDate()+" "+t[e.getMonth()]+" "+e.getFullYear();return e.getMinutes()<10?a+", "+e.getHours()+":0"+e.getMinutes():a+", "+e.getHours()+":"+e.getMinutes()},getClass(t){return t.user===this.getCurrentUser().username?"postBlue":"postGrey"}})},Z=X,tt=(a("baa2"),a("4983")),et=a("eb85"),at=Object(h["a"])(Z,K,V,!1,null,null,null),rt=at.exports;q()(at,"components",{QScrollArea:tt["a"],QCard:C["a"],QCardSection:b["a"],QSpace:v["a"],QBtn:_["a"],QSeparator:et["a"],QEditor:f["a"]});var st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"q-ma-md"},[a("q-card-section",{staticClass:"row bg-primary"},[a("div",{staticClass:"text-white text-h6 q-ma-sm"},[t._v("Product backlog")]),a("q-space"),a("div",{staticClass:"row"},[a("q-space"),a("div",{staticClass:"q-ma-sm"},[t.checkRole("Product Owner")||t.checkRole("Scrum Master")?a("q-btn",{attrs:{size:"md",icon:"add",color:"secondary",label:"Add user story"},on:{click:function(e){t.addCard=!0}}}):t._e()],1)],1)],1)],1),a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8"},[a("q-card-section",{staticClass:"row bg-secondary"},[a("div",{staticClass:"text-white text-overline"},[t._v("UNFINISHED USER STORIES")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("q-card-section",{staticClass:"row bg-secondary"},[a("div",{staticClass:"text-white text-overline"},[t._v("List of user stories")])]),t._l(t.projectCards,(function(e,r){return a("div",{key:r,staticClass:"q-pa-sm"},[""===e.sprint_id&&"DONE"!==e.card_round?a("Card",{attrs:{allCards:t.allCards,card:e,projectId:t.projectId,projectUsers:t.namesOfUsers},on:{updateCardsArrays:t.updateCardsArrays}}):t._e()],1)}))],2),a("div",{staticClass:"col"},[a("q-card-section",{staticClass:"row bg-secondary"},[a("div",{staticClass:"text-white text-overline"},[t._v("User stories for active Sprint")])]),t._l(t.projectCards,(function(e,r){return a("div",{key:r,staticClass:"q-pa-sm"},[""!==e.sprint_id&&t.isActive(e.sprint_id)&&"DONE"!==e.card_round?a("Card",{attrs:{card:e,projectId:t.projectId,projectUsers:t.namesOfUsers}}):t._e()],1)}))],2)])],1),a("div",{staticClass:"col-4"},[a("q-card-section",{staticClass:"row bg-secondary"},[a("div",{staticClass:"text-white text-overline"},[t._v("FINISHED")])]),t._l(t.projectCards,(function(e,r){return a("div",{key:r,staticClass:"q-pa-sm"},["DONE"===e.card_round?a("Card",{attrs:{card:e,projectId:t.projectId,projectUsers:t.namesOfUsers}}):t._e()],1)}))],2)])]),a("q-dialog",{model:{value:t.addCard,callback:function(e){t.addCard=e},expression:"addCard"}},[a("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"80vh"}},[a("q-card-section",{staticClass:"row bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v("Add new user story")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:t.onResetCard}})],1),a("AddCardsForm",{attrs:{newCard:t.newCard,editCard:!1},on:{submitCard:t.onResetCard}})],1)],1)],1)},it=[],ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{class:"DONE"===t.card.card_round?"cursor-move bg-green-2 q-mt-xs":"cursor-move bg-white q-mt-xs",attrs:{bordered:""}},[a("q-card-section",{class:"DONE"===t.card.card_round?"row bg-green-5":"row bg-secondary"},[a("span",{staticClass:"text-white text-h6 q-ma-xxs"},[t._v(t._s(t.card.card_name))]),a("q-space"),a("span",{staticClass:"text-white text-capitalize q-ml-xxs right"},[t._v("("+t._s(t.card.priority)+")")])],1),a("q-card-section",{staticClass:"q-pt-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",[a("span",{staticClass:"material-icons text-h4",class:t.setColor(t.card.card_round)},[t._v("description")]),t._v(" "+t._s(t.card.description))])])]),a("div",{staticClass:"row items-center no-wrap"},[""!==t.card.past_expected_time?a("div",{staticClass:"col"},[a("div",{staticClass:"text-grey"},[a("span",{staticClass:"material-icons text-h4"},[t._v("history")]),a("span",{staticClass:"text-weight-bolder text-h6"},[t._v(" "+t._s(t.card.past_expected_time))]),t.card.past_expected_time>1?a("span",{staticClass:"text-p"},[t._v(" points")]):t._e(),1==t.card.past_expected_time?a("span",{staticClass:"text-p"},[t._v(" point")]):t._e()])]):t._e(),""!==t.card.expected_time?a("div",{staticClass:"col"},[a("div",[a("span",{staticClass:"material-icons text-h4",class:t.setColor(t.card.card_round)},[t._v("schedule")]),a("span",{staticClass:"text-weight-bolder text-h6"},[t._v(" "+t._s(t.card.expected_time))]),t.card.expected_time>1?a("span",{staticClass:"text-p"},[t._v(" points")]):t._e(),1==t.card.expected_time?a("span",{staticClass:"text-p"},[t._v(" point")]):t._e()])]):t._e(),a("div",{staticClass:"col"},[a("div",{staticClass:"text-overline",class:t.setColor(t.card.card_round)},[a("span",{class:t.setColor(t.card.card_round)},[t._v("VALUE: ")]),a("span",{staticClass:"text-weight-bolder text-h6 text-black"},[t._v(" "+t._s(t.card.value))])])])]),"DONE"!==t.card.card_round?a("div",{staticClass:"row items-center no-wrap"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-overline",class:t.setColor(t.card.card_round)},[t._v("\n            ASSIGNED TO SPRINT:\n            "),""===t.card.sprint_id?a("span",{staticClass:"text-weight-bolder text-h5 text-negative"},[a("span",{staticClass:"material-icons"},[t._v("highlight_off")])]):t._e(),""!==t.card.sprint_id?a("span",{staticClass:"text-weight-bolder text-h5 text-negative"},[a("span",{staticClass:"material-icons"},[t._v("done")])]):t._e()])])]):t._e(),""===t.card.acceptance_test||0!==t.card.acceptance_test.length?a("div",{staticClass:"row items-center no-wrap"},[a("div",{staticClass:"col"},[a("div",{staticClass:"text-overline",class:t.setColor(t.card.card_round)},[t._v("ACCEPTANCE TESTS:")]),t._l(t.card.acceptance_test,(function(e,r){return a("div",{key:r},[a("span",{staticClass:"material-icons text-h6"},[t._v("tag")]),t._v(t._s(e))])}))],2)]):t._e(),""!==t.card.comment?a("div",{staticClass:"row items-center no-wrap"},[a("div",{staticClass:"col text-overline",class:t.setColor(t.card.card_round)},[a("hr",{staticClass:"q-ma-md",staticStyle:{opacity:".5"}}),a("span",{staticClass:"text-black"},[t._v("PROJECT OWNER'S COMMENT: ")]),a("span",{staticClass:"text-caption"},[t._v(t._s(t.card.comment))])])]):t._e()]),""===t.card.sprint_id&&"DONE"!==t.card.card_round?a("q-card-actions",{attrs:{horizontal:"",align:"right"}},[a("q-btn",{attrs:{flat:"",round:"",color:"negative",icon:"delete"},on:{click:function(e){t.confirmDelete=!0,t.deleteCardId=t.card._id}}}),a("q-btn",{attrs:{flat:"",icon:"edit",color:"secondary"},on:{click:function(e){t.editCardId=t.card._id,t.editCards=t.card,t.editCardData=!0}}}),t.checkRole("Scrum Master")&&t.activeSprintExists()?a("q-btn",{attrs:{flat:"",round:"",color:"teal",icon:"schedule"},on:{click:function(e){t.expectedTime=!0,t.expectedTimeCard=t.card}}}):t._e()],1):t._e(),""!==t.card.sprint_id&&"DONE"!==t.card.card_round?a("q-card-actions",{attrs:{horizontal:"",align:"right"}},[t.checkRole("Product Owner")&&t.activeSprintExists()?a("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"grading"},on:{click:function(e){t.acceptReject=!0,t.acceptRejectCard=t.card}}}):t._e()],1):t._e()],1),a("q-dialog",{model:{value:t.confirmDelete,callback:function(e){t.confirmDelete=e},expression:"confirmDelete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"delete",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want to delete this card?")])],1),a("q-card-actions",{attrs:{horizontal:"",align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:function(e){t.deleteCardId=""}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"DELETE",color:"negative"},on:{click:function(e){return t.deleteFunction(t.deleteCardId)}}})],1)],1)],1),a("q-dialog",{model:{value:t.editCardData,callback:function(e){t.editCardData=e},expression:"editCardData"}},[a("q-card",{staticClass:"q-pa-md",staticStyle:{width:"80vh"}},[a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6"},[t._v(" Edit Card ")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("CardsForm",{attrs:{newCard:t.editCards,editCard:!0,editCardId:t.editCardId},on:{submitCard:function(e){return t.updateCards()}}})],1)],1),a("q-dialog",{model:{value:t.expectedTime,callback:function(e){t.expectedTime=e},expression:"expectedTime"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm text-overline text-secondary"},[t._v("SET EXPECTED TIME FOR THE CARD [points]")])]),a("q-card-actions",{attrs:{horizontal:"",align:"center"}},[a("q-card-section",{staticClass:"row"},[a("q-input",{attrs:{filled:"",type:"number",min:"1","lazy-rules":"",label:t.card.expected_time,rules:[function(t){return null!==t&&""!==t||"Please select expected time"}]},model:{value:t.timeExpected,callback:function(e){t.timeExpected=e},expression:"timeExpected"}})],1),a("q-card-section",{staticClass:"row items-center"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:function(e){t.expectedTimeCard=""}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"SET",color:"teal"},on:{click:function(e){return t.editExpectedTime(t.expectedTimeCard)}}})],1)],1)],1)],1),a("q-dialog",{model:{value:t.acceptReject,callback:function(e){t.acceptReject=e},expression:"acceptReject"}},[a("q-card",{staticStyle:{width:"800px","max-width":"80vw"}},[a("q-card-section",{staticClass:"row items-center bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v(" Accept or reject user story ")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",{staticClass:"row items-center"},[a("AcceptReject",{attrs:{card:this.acceptRejectCard,project:this.project,projectUsers:this.projectUsers}})],1)],1)],1)],1)},nt=[],ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-ma-md"},[a("q-form",{staticClass:"q-ma-md",on:{submit:t.onSubmit,reset:t.onReset}},[a("q-input",{attrs:{filled:"",label:"Name","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.addedCard.card_name,callback:function(e){t.$set(t.addedCard,"card_name",e)},expression:"addedCard.card_name"}}),a("q-input",{attrs:{filled:"",label:"Description","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please type something"}]},model:{value:t.addedCard.description,callback:function(e){t.$set(t.addedCard,"description",e)},expression:"addedCard.description"}}),a("div",{staticClass:"text-caption"},[t._v("Acceptance tests")]),a("q-input",{attrs:{hint:"Write each test in new line!",filled:"",placeholder:"First test\nSecond test\nThird test",type:"textarea",rows:3},model:{value:t.acc_tests,callback:function(e){t.acc_tests=e},expression:"acc_tests"}}),a("hr",{staticClass:"q-ma-md",staticStyle:{opacity:".5"}}),a("div",{staticClass:"row"},[a("q-input",{staticStyle:{width:"230px"},attrs:{filled:"",type:"number",hint:"Set business value 1-10",label:"Business value","lazy-rules":"",max:"10",min:"1",rules:[function(t){return t&&11>t>0||"Please set Business value"}]},model:{value:t.addedCard.value,callback:function(e){t.$set(t.addedCard,"value",e)},expression:"addedCard.value"}}),a("q-space"),a("q-select",{staticStyle:{width:"230px"},attrs:{filled:"",options:t.priority_options,label:"Priority","lazy-rules":"",rules:[function(t){return t&&t.length>0||"Please set priority"}]},model:{value:t.addedCard.priority,callback:function(e){t.$set(t.addedCard,"priority",e)},expression:"addedCard.priority"}})],1),a("q-card-actions",{attrs:{horizontal:"",align:"right"}},[a("q-btn",{attrs:{label:"Submit",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Reset",type:"reset",color:"primary",flat:""}})],1),a("div",{staticClass:"q-ma-md text-center"},[""!=t.error?a("p",{staticStyle:{color:"red"}},[t._v(t._s(t.error))]):t._e()])],1)],1)},dt=[],lt=(a("498a"),{name:"CardForm",data(){return{priority_options:["Must have","Could have","Should have","Won't have this time"],error:"",numberOfTests:0,addedCard:{id:"",project_id:"",expected_time:"",past_expected_time:"",comment:"",sprint_id:"",card_name:"",description:"",acceptance_test:[],priority:"",value:"",subtasks:[],card_round:"PRODUCT BACKLOG"},acc_tests:""}},props:{newCard:{type:Object},editCard:{type:Boolean},editCardId:{type:String}},mounted(){this.allCards=this.getCards(),this.onReset(),this.acc_tests=this.setAcceptanceTests()},methods:o()(o()(o()({},Object(n["c"])("card",["getCards"])),Object(n["b"])("card",["postCard","updateCard"])),{},{setAcceptanceTests(){const t=this.addedCard.acceptance_test;let e="";for(var a in t)e+=t[a],e+="\n";return e},checkCard(){var t=!0;for(var e in this.allCards)this.addedCard.card_name.toLowerCase().trim().trim()===this.allCards[e].card_name.toLowerCase().trim().trim()&&this.allCards[e]._id!==this.addedCard._id&&(t=!1,this.error='Project with the name "'+this.addedCard.card_name.trim()+'" already exists.');return t},splitTests(t){let e=[];return t.includes("\n")?e=t.split("\n"):e.push(t),""===e[e.length-1]&&e.pop(),e},upperCaseArray(t){const e=[];for(var a in t)e.push(t[a].charAt(0).toUpperCase()+t[a].slice(1));return e},onSubmit(){let t="";if(this.checkCard()){const e=this.splitTests(this.acc_tests),a=this.upperCaseArray(e);this.addedCard.acceptance_test=a,this.$props.editCard?(t="Card updated.",this.updateCard(this.addedCard),this.onReset()):(t="Card added.",this.postCard(this.addedCard),this.onReset()),this.$q.notify({color:"green",textColor:"white",icon:"cloud_done",message:t,position:"top-right",timeout:1e3}),this.$emit("submitCard"),this.error=""}},onReset(){this.addedCard._id=this.$props.newCard._id,this.addedCard.expected_time=this.$props.newCard.expected_time,this.addedCard.past_expected_time=this.$props.newCard.past_expected_time,this.addedCard.comment=this.$props.newCard.comment,this.addedCard.sprint_id=this.$props.newCard.sprint_id,this.addedCard.project_id=this.$props.newCard.project_id,this.addedCard.card_name=this.$props.newCard.card_name,this.addedCard.description=this.$props.newCard.description,this.addedCard.acceptance_test=this.$props.newCard.acceptance_test,this.addedCard.priority=this.$props.newCard.priority,this.addedCard.value=this.$props.newCard.value,this.addedCard.subtasks=this.$props.newCard.subtasks,this.addedCard.card_round="PRODUCT BACKLOG",this.error=""}})}),pt=lt,ut=a("ddd8"),mt=Object(h["a"])(pt,ct,dt,!1,null,null,null),ht=mt.exports;q()(mt,"components",{QForm:E["a"],QInput:T["a"],QSpace:v["a"],QSelect:ut["a"],QCardActions:Q["a"],QBtn:_["a"]});var Ct=a("be75"),_t={name:"Card",components:{CardsForm:ht,AcceptReject:Ct["a"]},props:{card:{type:Object},projectId:{type:String},allCards:{type:Array},projectUsers:{type:Array}},data(){return{editCard:!0,user:{},project:{},editCardData:!1,confirmDelete:!1,expectedTimeCard:{},expectedTime:!1,acceptReject:!1,acceptRejectCard:{},timeExpected:"",deleteCardId:"",editCardId:"",editCards:{sprint_id:"",expected_time:"",past_expected_time:"",comment:"",project_id:"",card_name:"",description:"",acceptance_test:[],priority:"",value:"",subtasks:[],card_round:"PRODUCT BACKLOG"}}},mounted(){this.user=this.getCurrentUser(),this.project=this.getCurrentProject()},methods:o()(o()(o()(o()(o()(o()({},Object(n["c"])("card",["getCards"])),Object(n["c"])("sprint",["getSprints"])),Object(n["b"])("card",["postCard","updateCard","deleteCard"])),Object(n["c"])("user",["getCurrentUser"])),Object(n["c"])("project",["getProjects"])),{},{updateCards(){this.editCardData=!1,this.$emit("updateCardsArrays")},deleteFunction(t){this.deleteCard(t),this.$emit("updateCardsArrays")},editExpectedTime(t){t.expected_time=this.timeExpected,this.updateCard(t),this.timeExpected=""},checkRole(t){var e=!1;if(this.user!=={})for(var a in"Admin"===this.user.permissions&&(e=!0),this.project.users)this.user.username===this.project.users[a].user_name&&this.project.users[a].user_role[1]===t&&(e=!0);return e},getCurrentProject(){var t={},e=this.getProjects();for(var a in e)if(e[a]._id===this.projectId)return t=e[a],t},isActive(t,e){var a=P()(t,"DD/MM/YYYY"),r=P()(e,"DD/MM/YYYY"),s=new Date,i=P()(s,"DD/MM/YYYY");return i>a&&i<r},activeSprintExists(){var t=this.getSprints();for(var e in t)if(t[e].project_id===this.$props.projectId&&this.isActive(t[e].start_date,t[e].end_date))return!0;return!1},setColor(t){return"DONE"===t?"text-green-5":"text-secondary"}})},vt=_t,ft=Object(h["a"])(vt,ot,nt,!1,null,null,null),bt=ft.exports;q()(ft,"components",{QCard:C["a"],QCardSection:b["a"],QSpace:v["a"],QCardActions:Q["a"],QBtn:_["a"],QDialog:M["a"],QAvatar:W["a"],QInput:T["a"]}),q()(ft,"directives",{ClosePopup:H["a"]});var gt={name:"ProductBacklog",components:{Card:bt,AddCardsForm:ht},data(){return{projectCards:[],sprints:{},project:{},addCard:!1,allCards:[],namesOfUsers:[],newCard:{_id:"",project_id:this.$route.params.id,sprint_id:"",expected_time:"",past_expected_time:"",card_name:"",comment:"",description:"",acceptance_test:[],priority:"",value:"",subtasks:[],card_round:""}}},mounted(){this.fetchCards(),this.fetchSprint(),this.project=this.getCurrentproject(),this.sprints=this.getSprints(),this.projectCards=this.cardsToArray(this.getCards()),setTimeout((()=>{this.namesOfUsers=this.namesOfProjectUsers()}),200)},props:{projectId:{type:String},user:{type:Object}},methods:o()(o()(o()(o()(o()(o()({},Object(n["c"])("card",["getCards"])),Object(n["c"])("project",["getProjects"])),Object(n["b"])("card",["fetchCards"])),Object(n["c"])("sprint",["getSprints"])),Object(n["b"])("sprint",["fetchSprint"])),{},{updateCardsArrays(){setTimeout((()=>{var t=this.getCards();this.projectCards=this.cardsToArray(t)}),1e3)},cardsToArray(t){var e=[];for(var a in t)t[a].project_id===this.projectId&&e.push(t[a]);return e},checkRole(t){var e=!1;if(this.user!=={})for(var a in"Admin"===this.user.permissions&&(e=!0),this.project.users)this.user.username===this.project.users[a].user_name&&this.project.users[a].user_role[1]===t&&(e=!0);return e},getCurrentproject(){var t=this.getProjects();for(var e in t)if(t[e]._id===this.projectId)return t[e];return"No project found."},namesOfProjectUsers(){const t=[];for(var e in this.project.users)"scrum master"!==this.project.users[e].user_role[1].toLowerCase()&&"product owner"!==this.project.users[e].user_role[1].toLowerCase()&&t.push(this.project.users[e].user_name);return t},isActive(t){var e=this.getCardsSprint(t),a=e[0],r=e[1],s=P()(a,"DD/MM/YYYY"),i=P()(r,"DD/MM/YYYY"),o=new Date,n=P()(o,"DD/MM/YYYY");return n>s&&n<i},getCardsSprint(t){for(const e in this.sprints)if(console.log(this.sprints[e]._id),console.log(t),this.sprints[e]._id===t)return[this.sprints[e].start_date,this.sprints[e].end_date]},onResetCard(){this.addCard=!1,this.updateCardsArrays(),this.newCard.project_id=this.$route.params.id,this.newCard.sprint_id="",this.newCard.description="",this.newCard.card_name="",this.newCard.acceptance_test=[],this.newCard.subtasks="",this.newCard.card_round="",this.newCard.expectedtime="",this.newCard.comment="",this.newCard.past_expected_time="",this.newCard.priority="",this.newCard.value="",this.newCard.subtasks="",this.expected_time=""}})},qt=gt,wt=Object(h["a"])(qt,st,it,!1,null,null,null),jt=wt.exports;q()(wt,"components",{QCard:C["a"],QCardSection:b["a"],QSpace:v["a"],QBtn:_["a"],QDialog:M["a"]}),q()(wt,"directives",{ClosePopup:H["a"]});var St={name:"Project",components:{ProjectForm:c["a"],SprintTable:J,Documentation:j,ProjectWall:rt,ProductBacklog:jt},data(){return{user:{},projectId:"",editProjectData:!1,dialogTitle:"Edit project",editProject:{name:"",users:[],description:"",documentation:"",wall:[],_id:""},allCards:[],tab:"productbacklog",splitterModel:20,activeSprint:""}},computed:{project(){var t=this.getProjects();for(var e in t)if(t[e]._id===this.projectId)return t[e];return"No project found."}},methods:o()(o()(o()(o()(o()(o()({},Object(n["c"])("user",["getCurrentUser"])),Object(n["b"])("sprint",["fetchSprint"])),Object(n["c"])("project",["getProjects"])),Object(n["b"])("card",["fetchCards"])),Object(n["c"])("card",["getCards"])),{},{updateProjectInfo(){this.editProjectData=!1},checkRole(t){var e=!1;if(this.user!=={})for(var a in"Admin"===this.user.permissions&&(e=!0),this.project.users)this.user.username===this.project.users[a].user_name&&this.project.users[a].user_role[1]===t&&(e=!0);return e},editFunction(){this.editProject.name=this.project.name,this.editProject.description=this.project.description,this.editProject.documentation=this.project.documentation,this.editProject.wall=this.project.wall,this.editProject._id=this.projectId;var t=[];for(var e in this.project.users){var a={label:this.project.users[e].user_name,value:this.project.users[e].user_name,role:this.project.users[e].user_role};t.push(a)}this.editProject.users=t,this.editProjectData=!0},formatUserRoles(t){for(var e="",a=1;a<t.length;a++)e+=t[a],a<t.length-1&&(e+=" + ");return e},avatarColor(t){var e="";return"Product Owner"===t[1]&&(e="teal"),"Scrum Master"===t[1]&&(e="orange"),"Developer"===t[1]&&(e="red"),e},showCards(){this.addCard=!1,this.fetchCards(),setTimeout((()=>{var t=this.getCards();this.allCards=this.cardsToArray(t)}),1e3)},cardsToArray(t){var e=[];for(var a in t)t[a].project_id===this.projectId&&e.push(t[a]);return e}}),mounted(){this.user=this.getCurrentUser(),this.fetchSprint(),this.projectId=this.$route.params.id,this.showCards()}},xt=St,yt=(a("f04a"),a("9989")),Dt=a("8562"),kt=a("429b"),Pt=a("7460"),Yt=a("adad"),At=a("823b"),Et=Object(h["a"])(xt,r,s,!1,null,null,null);e["default"]=Et.exports;q()(Et,"components",{QPage:yt["a"],QBtn:_["a"],QCard:C["a"],QCardSection:b["a"],QSeparator:et["a"],QAvatar:W["a"],QSpace:v["a"],QDialog:M["a"],QSplitter:Dt["a"],QTabs:kt["a"],QTab:Pt["a"],QTabPanels:Yt["a"],QTabPanel:At["a"]}),q()(Et,"directives",{ClosePopup:H["a"]})},baa2:function(t,e,a){"use strict";a("e500")},e500:function(t,e,a){},f04a:function(t,e,a){"use strict";a("27e4")}}]);