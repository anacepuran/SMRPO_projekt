(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"051b":function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{staticClass:"q-ma-lg window-width"},[t("div",{staticClass:"q-pa-md"},[t("q-table",{staticClass:"q-pa-lg",attrs:{title:"Users",data:e.allUsers,columns:e.columns,"row-key":"username","virtual-scroll":"",pagination:e.pagination,"rows-per-page-options":[0],loading:e.loading},on:{"update:pagination":function(s){e.pagination=s}},scopedSlots:e._u([{key:"loading",fn:function(){return[t("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"body-cell-edit",fn:function(s){return[t("q-td",{attrs:{props:s}},[t("div",[t("q-btn",{attrs:{size:"sm",round:"",color:"secondary",icon:"create"},on:{click:function(t){return e.editFunction(s.row)}}})],1)])]}},{key:"body-cell-delete",fn:function(s){return[t("q-td",{attrs:{props:s}},[t("div",[t("q-btn",{attrs:{size:"sm",round:"",color:"negative",icon:"delete"},on:{click:function(t){e.deleteUserId=s.row._id,e.confirmDelete=!0}}})],1)])]}}])}),t("div",{staticClass:"row q-ma-md"},[t("q-space"),t("q-btn",{attrs:{color:"primary",size:"md",label:"ADD NEW USER"},on:{click:function(s){e.dialogTitle="Add user",e.addUser=!0}}})],1)],1),t("q-dialog",{attrs:{persistent:""},model:{value:e.confirmDelete,callback:function(s){e.confirmDelete=s},expression:"confirmDelete"}},[t("q-card",[t("q-card-section",{staticClass:"row items-center"},[t("q-avatar",{attrs:{icon:"delete",color:"primary","text-color":"white"}}),t("span",{staticClass:"q-ml-sm"},[e._v("Are you sure you want to delete this user?")])],1),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:function(s){e.deleteUserId=""}}}),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"DELETE",color:"negative"},on:{click:function(s){return e.deleteFunction(e.deleteUserId)}}})],1)],1)],1),t("q-dialog",{model:{value:e.addUser,callback:function(s){e.addUser=s},expression:"addUser"}},[t("q-card",{staticClass:"q-pa-md",staticStyle:{width:"80vh"}},[t("q-card-section",{staticClass:"row items-center"},[t("div",{staticClass:"text-h6"},[e._v(e._s(e.dialogTitle))]),t("q-space"),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.onReset}})],1),t("UserForm",{attrs:{newUser:e.newUser,editUser:e.editUser},on:{submitUser:e.showUsers}})],1)],1)],1)},i=[],n=t("7053"),r=t.n(n),l=t("2f62"),o=t("aa74"),d={name:"Users",components:{UserForm:o["a"]},data(){return{pagination:{rowsPerPage:0},newUser:{name:"",surname:"",email:"",username:"",password:"",tasks:[],permissions:null,_id:"",last_login:""},dialogTitle:"",loading:!1,allUsers:[],addUser:!1,deleteUserId:"",confirmDelete:!1,editUser:!1,columns:[{name:"username",required:!0,label:"Username",align:"center",field:e=>e.username,sortable:!0},{name:"name",align:"center",label:"Name",field:"name"},{name:"surname",align:"center",label:"Surname",field:"surname",sortable:!0},{name:"email",align:"center",label:"Email",field:"email"},{name:"permissions",align:"center",label:"Permissions",field:"permissions"},{name:"last_login",align:"center",label:"Last login",field:"last_login"},{name:"edit",align:"center",label:"Edit user",field:"edit"},{name:"delete",align:"center",label:"Delete user",field:"delete"}]}},mounted(){this.fetchUsers(),this.loading=!0,this.showUsers()},methods:r()(r()(r()({},Object(l["c"])("user",["getUsers"])),Object(l["b"])("user",["fetchUsers","deleteUser"])),{},{deleteFunction(e){this.deleteUser(e),this.loading=!0,this.showUsers(),this.$q.notify({color:"red",textColor:"white",icon:"delete",message:"User deleted.",position:"top-right",timeout:1e3})},editFunction(e){this.dialogTitle="Edit user",this.editUser=!0,this.newUser.name=e.name,this.newUser.surname=e.surname,this.newUser.email=e.email,this.newUser.username=e.username,this.newUser.password="",this.newUser.tasks=[],this.newUser.permissions=e.permissions,this.newUser._id=e._id,this.newUser.last_login=e.last_login,this.newUser.this_login=e.this_login,this.addUser=!0},showUsers(){this.addUser=!1,this.loading=!0,setTimeout((()=>{var e=this.getUsers();this.allUsers=this.usersToArray(e),this.loading=!1}),1e3)},usersToArray(e){var s=[];for(var t in e)s.push(e[t]);return s},onReset(){this.newUser.name="",this.newUser.surname="",this.newUser.email="",this.newUser.username="",this.newUser.password="",this.newUser.permissions=null,this.newUser._id="",this.newUser.last_login="",this.newUser.this_login="",this.newUser.tasks="",this.editUser=!1}})},c=d,m=t("2877"),u=t("9989"),p=t("eaac"),h=t("74f7"),U=t("db86"),g=t("9c40"),w=t("2c91"),f=t("24e8"),b=t("f09f"),q=t("a370"),v=t("cb32"),_=t("4b7e"),y=t("7f67"),k=t("eebe"),C=t.n(k),Q=Object(m["a"])(c,a,i,!1,null,null,null);s["default"]=Q.exports;C()(Q,"components",{QPage:u["a"],QTable:p["a"],QInnerLoading:h["a"],QTd:U["a"],QBtn:g["a"],QSpace:w["a"],QDialog:f["a"],QCard:b["a"],QCardSection:q["a"],QAvatar:v["a"],QCardActions:_["a"]}),C()(Q,"directives",{ClosePopup:y["a"]})}}]);