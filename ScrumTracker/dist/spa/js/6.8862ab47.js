(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"89f1":function(e,t,r){"use strict";r("fea4")},bc13:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{staticClass:"q-ma-lg window-width"},[r("div",{staticClass:"text-h4 q-ma-md"},[e._v("Projects")]),r("div",{staticClass:"row q-ma-md"},[r("div",{staticClass:"col-3"},[r("q-input",{attrs:{dense:"",outlined:"","bottom-slots":"",label:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.search?r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.search=""}}}):e._e(),r("q-icon",{attrs:{name:"search"}})]},proxy:!0},{key:"hint",fn:function(){return[e._v("\n          Search project by name\n        ")]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("q-space"),r("div",{staticClass:"q-ma-sm col-2"},["Admin"===e.currentUser.permissions?r("q-btn",{attrs:{size:"md",color:"primary",label:"Add project",icon:"create_new_folder"},on:{click:function(t){e.addProject=!0}}}):e._e()],1)],1),r("div",{staticClass:"row q-ma-md"},[r("q-table",{staticClass:"full-width",attrs:{data:e.filteredProjects,columns:e.columns,"row-key":"name","virtual-scroll":"",pagination:e.pagination,"rows-per-page-options":[0],loading:e.loading},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"loading",fn:function(){return[r("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"body-cell-name",fn:function(t){return[r("q-td",{attrs:{props:t},on:{click:function(r){return e.openProject(t.row._id)}}},[r("div",[r("q-icon",{staticClass:"q-ma-sm",attrs:{size:"sm",color:"secondary",name:"folder_open"}}),r("span",{staticClass:"q-ma-sm",staticStyle:{"font-size":"2vh"}},[e._v(e._s(t.row.name))])],1)])]}},{key:"body-cell-users",fn:function(t){return[r("q-td",{attrs:{props:t}},e._l(t.row.users,(function(t){return r("div",{key:t.user_name,staticClass:"row"},[r("div",{attrs:{clasS:" col-1"}},[r("q-avatar",{staticClass:"q-ma-xs",attrs:{size:"20px","font-size":"15px",color:e.avatarColor(t.user_role),"text-color":"white",icon:"person"}})],1),r("span",{staticClass:"col-4 q-ma-xs"},[e._v(e._s(t.user_name))]),r("span",{staticClass:"col text-caption text-grey q-ma-xs"},[e._v(" "+e._s(e.formatUserRoles(t.user_role)))])])})),0)]}},{key:"body-cell-description",fn:function(t){return[r("q-td",{staticClass:"q-ma-md",attrs:{props:t}},[r("span",{staticClass:"text-caption",staticStyle:{opacity:".7"}},[e._v(e._s(t.row.description))])])]}},"Admin"===e.currentUser.permissions?{key:"body-cell-delete",fn:function(t){return[r("q-td",{attrs:{props:t}},[r("div",[r("q-btn",{attrs:{size:"sm",round:"",color:"negative",icon:"delete"},on:{click:function(r){e.confirmDelete=!0,e.deleteProjectId=t.row._id}}})],1)])]}}:null],null,!0)})],1),r("q-dialog",{model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[r("q-card",[r("q-card-section",{staticClass:"row items-center"},[r("q-avatar",{attrs:{icon:"delete",color:"primary","text-color":"white"}}),r("span",{staticClass:"q-ml-sm"},[e._v("Are you sure you want to delete this project?")])],1),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:function(t){e.deleteProjectId=""}}}),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"DELETE",color:"negative"},on:{click:function(t){return e.deleteFunction(e.deleteProjectId)}}})],1)],1)],1),r("q-dialog",{model:{value:e.addProject,callback:function(t){e.addProject=t},expression:"addProject"}},[r("q-card",{staticClass:"q-pa-md",staticStyle:{width:"80vh"}},[r("q-card-section",{staticClass:"row items-center"},[r("div",{staticClass:"text-h6 q-ma-md"},[e._v("Create new project")]),r("q-space"),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:e.onReset}})],1),r("ProjectForm",{attrs:{newProject:e.newProject,editProject:!1},on:{submitProject:e.showProjects}})],1)],1)],1)},a=[],o=r("7053"),n=r.n(o),c=(r("e01a"),r("498a"),r("2f62")),i=r("1da1"),l={name:"Home",components:{ProjectForm:i["a"]},data(){return{currentUser:{},pagination:{rowsPerPage:0},loading:!1,search:"",addProject:!1,deleteProjectId:"",confirmDelete:!1,projects:[],newProject:{name:"",users:[],description:""}}},computed:{filteredProjects(){return this.getSearchFiltered(this.search)},columns(){return"Admin"===this.currentUser.permissions?[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,sortable:!0},{name:"users",align:"left",label:"Users",field:"users"},{name:"description",align:"left",label:"Description",field:"description",sortable:!0},{name:"delete",align:"center",label:"Delete project",field:"delete"}]:[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,sortable:!0},{name:"users",align:"left",label:"Users",field:"users"},{name:"description",align:"left",label:"Description",field:"description",sortable:!0}]}},methods:n()(n()(n()(n()(n()({},Object(c["c"])("user",["getCurrentUser"])),Object(c["c"])("project",["getProjects"])),Object(c["b"])("project",["fetchProjects","editProject","deleteProject"])),Object(c["b"])("card",["fetchCards"])),{},{openProject(e){this.$router.push("/project/"+e)},deleteFunction(e){this.deleteProject(e),this.showProjects()},showProjects(){this.addProject=!1,this.loading=!0,setTimeout((()=>{var e=this.getProjects();this.projects=this.projectsToArray(e),this.loading=!1}),1e3)},formatUserRoles(e){for(var t="",r=1;r<e.length;r++)t+=e[r],r<e.length-1&&(t+=" + ");return t},avatarColor(e){var t="";return"Product Owner"===e[1]&&(t="teal"),"Scrum Master"===e[1]&&(t="orange"),"Developer"===e[1]&&(t="red"),t},projectsToArray(e){var t=[];for(var r in e)t.push(e[r]);return t},onReset(){this.newProject.name="",this.newProject.users=[],this.newProject.description=""},getSearchFiltered(e){if(""!==this.search){var t=[];for(var r in this.projects){const s=this.projects[r].name.toLowerCase().trim();s.startsWith(e.toLowerCase().trim())&&t.push(this.projects[r])}return t}return this.projects}}),mounted(){this.currentUser=this.getCurrentUser(),this.fetchProjects(),this.showProjects(),this.fetchCards()}},d=l,p=(r("89f1"),r("2877")),u=r("9989"),m=r("27f9"),f=r("0016"),h=r("2c91"),j=r("9c40"),v=r("eaac"),b=r("74f7"),w=r("db86"),g=r("cb32"),q=r("24e8"),P=r("f09f"),C=r("a370"),y=r("4b7e"),_=r("7f67"),k=r("eebe"),x=r.n(k),Q=Object(p["a"])(d,s,a,!1,null,null,null);t["default"]=Q.exports;x()(Q,"components",{QPage:u["a"],QInput:m["a"],QIcon:f["a"],QSpace:h["a"],QBtn:j["a"],QTable:v["a"],QInnerLoading:b["a"],QTd:w["a"],QAvatar:g["a"],QDialog:q["a"],QCard:P["a"],QCardSection:C["a"],QCardActions:y["a"]}),x()(Q,"directives",{ClosePopup:_["a"]})},fea4:function(e,t,r){}}]);